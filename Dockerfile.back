FROM node:20-slim AS base
WORKDIR /usr/src/app

FROM base AS dependencies
COPY ./back-express/package*.json ./
# RUN npm i --prod=false
RUN npm i

FROM dependencies AS development
COPY ./back-fastapi /code/
CMD ["uvicorn", "main:app", "--host", "back", "--reload"]
EXPOSE $BACK_PORT
